<?xml version="1.0" encoding="utf-8"?>
<mx:VBox
	xmlns:mx="http://www.adobe.com/2006/mxml"
	paddingTop="10" paddingLeft="10" paddingRight="10" paddingBottom="10"
	horizontalAlign="left" backgroundColor="white" borderStyle="inset">
	
	<mx:List width="100%" height="100%" id="background" change="updateBackground();" verticalScrollPolicy="on" 
	         dataProvider="{Application.application.theController.imagery}" />
	<mx:CheckBox width="100%" label="Dim background" selected="true" id="dim"
	    change="Globals.vars.root.tileset.setDimming(dim.selected); Globals.vars.yahoo.alpha = dim.selected ? 0.5 : 1" />

	<mx:HBox>
	<mx:Button label="Edit..." click="new BackgroundDialog().init(background);" />
	<mx:Button label="Vector file" click="new VectorSourceDialog().init();" />
	</mx:HBox>

	<mx:Script><![CDATA[
		import net.systemeD.halcyon.*;
		import net.systemeD.halcyon.connection.*;
		import net.systemeD.potlatch2.*;
		import mx.core.*;
		import mx.collections.ArrayCollection;
		import mx.managers.PopUpManager;
		import net.systemeD.halcyon.Globals;

		private function updateBackground():void {
            var theMap:Map = Globals.vars.root;
			var bg:String=background.selectedItem.data;
			if (bg=='yahoo') {
				theMap.tileset.init('',false);
				Globals.vars.yahoo.show();
			} else {
				theMap.tileset.init(background.selectedItem.data,true);
				Globals.vars.yahoo.hide();
			}
		}

    ]]></mx:Script>	
</mx:VBox>

